<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Fate of the Jews in Europe, Visualized </title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="functions.js" ></script>
    <script src="graph-scroll.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script src="http://d3js.org/colorbrewer.v1.min.js"></script>

    <style type="text/css">
            .hidden{
                display:none;
            }

    body {
        max-width: 900px;
        margin: 0px auto;
        font-family: "Trebuchet MS", Helvetica, sans-serif;
        line-height: 1.5;
    }

    h1{
        margin: 50px;
    }

    h1{
        text-align: center;
    }

    #tooltip{
    position:absolute;
    width:150px;
    height:auto;
    padding:10px;
    background-color: white;
    border-radius:10px;
    box-shadow: 4px 4px 10px rgba(0,0,0,0.4);
    pointer-events: none;
    }

    #tooltip p{
    margin:0;
    font-family: sans-serif;
    font-size:12px;
    }
    
    #container{
        position: relative;
    }

    #sections{
        width: 300px;
        padding-bottom:300px;
    }

    #sections > section{
        opacity: .2;
        margin-bottom: 200px;
        padding-left: 15px;
        border-left: 5px solid darkgrey ;
    }

    #sections > section.graph-scroll-active{
        opacity: 1;
        border-left: 6px solid darkgrey ;
    }

    #graph{
        margin-left: 20px;
        width: 500px;
        position: sticky;
        top: 20px;
        float: right;
    }

    #graph svg{
        border:solid 5px lightgrey;
    }

    #map{
        float:left;
    }

    #controls{
        float:left;
    }
    #controls ul{
        list-style-type:none;
    }



  </style>

</head>
<body>



    <h1>The Fate of European Jews in the Holocaust</h1>
    <div id="container">
    <div id="graph"></div>
    <div id="sections">

        <section>
            <h3>Introduction: Pre-war Jewish Population by Country</h3>
            In 1933, approximately 9.5 million Jews lived in Europe, comprising 1.7% of the total European population. This number represented more than 60 percent of the world's Jewish population at that time, estimated at 15.3 million. Over half of the Jewish population lived in Poland, Romania, and the Soviet Union. Poland alone was home to 3 million Jews, the most of any country in Europe.
        </section>
        <section>
          <h3>Map of Locations of Camps</h3>
            From 1938 to 1944 an estimated 6 million jews would die at the hands of the Nazi Regime. The NazisHowever demographics only tell one part of the story. The next part is where victems died. Though it is commonly believed that most victems died in concentraion camps, almost a third of the people killed died in uncoordinated shootings and gassings around Europe, but mostly in the Soviet Union. Many people also died in the Ghettos due to poor conditions, starvation, disease, and exposure. Insert statstic about Warsaw Ghetto.

            <div id= tooltip class="hidden">
                <p>Name: <span id="camp"></span></p>
                <p>Name: <span id="campext"></span></p>
            </div>

            <form id="controls">
              <br><br>
              <input type="checkbox" name="layer" value="point-layer"> Concentration Camps
              <br><br>
              <input type="checkbox" name="layer" value="contour-layer"> Extermination Camps
            </form>

        </section>

        <section>
            <h3>9.5 Million Jews Revisualized</h3>
            It's difficult to get a sense of scale for 9.6 million people. It is also difficult to comprehend the path of Jews through the holocaust in relation to the total number of fatalities. This is a graph of the pre-war population of Jews in europe with every ten thousand people represented by a circle. Scholars estimate that around 3 millions Jews survived the Holocaust.

            that 6 Million Jews died in the Holocaust.
            <br><br>
            Let's begin with the demographics of those who died.
        </section>
        <section>
            <h3>Deaths by Demographic</h3>
            It's difficult to get a sense of scale for 9.6 million people. It is also difficult to comprehend the path of Jews through the holocaust in relation to the total number of fatalities. This is a graph of the pre-war population of Jews in europe with every ten thousand people represented by a circle. Scholars estimate that 6 Million Jews died in the Holocaust. Let's begin with the demographics of those who died. That leaves about 3 million Jews who surived.
            <br>
            <br>
            Use the menu below to select a demographic to view.
            <br><br>
            <select id="color_option">
                <option value="children">Children</option>
                <option value="women">Women</option>
                <option value="elderly">Elderly</option>
            </select>
            <br><br>
            All combined, women, children, and the elderly make up just more than half of the victems.

        </section>
        <section>
          <h3>Deaths by Location -- Extermination Camps and Ghettos</h3>
          However demographics only tell one part of the story. The next part is where victems died. Though it is commonly believed that most victems died in concentraion camps, almost a third of the people killed died in uncoordinated shootings and gassings around Europe, but mostly in the Soviet Union. Many people also died in the Ghettos due to poor conditions, starvation, disease, and exposure. Insert statstic about Warsaw Ghetto.
          <br>
          <form id="camp_option">
            <input type="checkbox" name="camps" value="Auschwitz"> Auschwitz Complex
            <br>
            <input type="checkbox" name="camps" value="Treblinka"> Trebkinka 2
            <br>
            <input type="checkbox" name="camps" value="Belzec"> Belzec
            <br>
            <input type="checkbox" name="camps" value="Sobibor"> Sobibor
            <br>
            <input type="checkbox" name="camps" value="Chelmno"> Chelmno
            <br>
            <input type="checkbox" name="camps" value="Ghettos"> Ghettos
            <br>
            <input type="checkbox" name="camps" value="reset"> Reset
          </form>
        </section>
        <section>
          <h3>Deaths by Location -- Concentration Camps, Shooting, and Others</h3>
          However demographics only tell one part of the story. The next part is where victems died. Though it is commonly believed that most victems died in concentraion camps, almost a third of the people killed died in uncoordinated shootings and gassings around Europe, but mostly in the Soviet Union. Many people also died in the Ghettos due to poor conditions, starvation, disease, and exposure. Insert statstic about Warsaw Ghetto.
          <br><br>
          <form id="other_option">
            <input type="checkbox" name="camps" value="western"> Shot in Western Poland
            <br>
            <input type="checkbox" name="camps" value="concentration"> Concentration Camps
            <br>
            <input type="checkbox" name="camps" value="russian"> Russian Jews Shot in the Soviet Union
            <br>
            <input type="checkbox" name="camps" value="german"> German, Austrian, and Czech     Jews shot in the Soviet Union
            <br>
            <input type="checkbox" name="camps" value="other"> Other
            <br>
            <input type="checkbox" name="camps" value="reset"> Reset
          </form>
        </section>
        <section>
          <h3>Conclusion</h3>

            Sources:

            Thank you:

            Dedication:

        </section>
    </div>

</div>



<script type="text/javascript">

const width = 575, height = 727
Promise.all([
    d3.json("europe-topo.json"),
    d3.csv("camps.csv"),
    d3.csv("extermination.csv"),
    d3.csv("overview_data.csv")
]).then(function(data){
    const map_data = data[0];
    const camps_data = data[1];
    const extermination_data = data[2];
    const overview_data = data[3];

    const color_scale = d3.scaleOrdinal(d3.schemeCategory10);
    const svg = d3.select("#graph").append("svg")
        .attr("width", 600)
        .attr("height", 400);

        //create the data that represents all the 9.6 million jews in Europe before the holocaust. 1 circle will represent 20,000 people. The  dots are objects with indexes that we will then use to assign them a class. The classes correspond to the place of death, type, or demographic characteristic
        var dots = [];

        for (let i = 0; i < 960; i++) {
          dots.push({"key": i, "value": null})
          //console.log(dots[i].key)
        }

        console.log(dots);

    const bar_charts = create_first_barchart(svg, 550, 330, "prewar", overview_data);
    const dot_plot = create_iris_plot(svg, 550, 330, dots);
    const map_plot = europe_map(svg, 575, 725, map_data, camps_data, extermination_data);

    const vis_steps = [section_1, section_2, section_3, section_4, section_5, section_6, section_7]
    const gs = d3.graphScroll()
      .container(d3.select("#container"))
      .graph(d3.select("#graph"))
      .eventId('sec1_id')
      .sections(d3.selectAll("#container #sections > section"))
      .on("active", function(i){
          console.log(i);
          vis_steps[i]();
      });

      //a function to clear the checkboxes in sections 5/6
      function clear_boxes(){
        console.log("clearing boxes")
        var checkboxes = document.getElementsByTagName('input');
        for (var i=0; i<checkboxes.length; i++)  {
          if (checkboxes[i].type == 'checkbox')   {
              checkboxes[i].checked = false;
            }
        }
      }

      //bar chart
      function section_1(){

        dot_plot.opacity(0);
        dot_plot.distance(500);
        dot_plot();

        svg.transition()
          .attr("height", 400);

        bar_charts.opacity(1)
        bar_charts();

        map_plot.opacity(.00000001)
        map_plot();

      }
      //Geographic Map
      function section_2(){

        dot_plot.opacity(0);
        dot_plot.distance(500);
        dot_plot();

        bar_charts.opacity(0)
        bar_charts();

        svg.transition()
          .attr("height", 650);

        map_plot.opacity(1)
        map_plot();



      }

      //dot plot -- Intro
      function section_3(){

        dot_plot.opacity(1);
        dot_plot.distance(50);
        dot_plot();

        svg.transition()
          .attr("height", 400);

        bar_charts.opacity(0);
        bar_charts();

        //bring in the new Map
        map_plot.opacity(.0000000001);
        map_plot();
    }
      //dot plot -- By Demographic
      function section_4(){

        //get color option from menu
        document.getElementById('color_option').addEventListener('change', function(event){

          let color = document.getElementById("color_option").value;
          console.log(color);
          dot_plot.color(color)
        })

        svg.transition()
          .attr("height", 400);

        dot_plot.add_count("reset");
        dot_plot.distance(50);
        dot_plot();

        bar_charts.opacity(0)
        bar_charts()

        clear_boxes();
      }

      //dot plot -- by Camps & Ghettos
      function section_5(){

        let count = 0; //holds the number of circles to move down
          //get all selected elements from the form
          let selected = [];
          var form = document.getElementById('camp_option');
          for(var i=0; i < form.length; i++){
            let current = form[i]
              form[i].onclick = function(){

                if (current.value == "reset"){
                  clear_boxes();
                }

                if (selected.includes(name)){

                  selected.filter((d)=> d == current.value)
                  dot_plot.add_count(current.value)
                }else{

                  selected.push(current.value);
                  dot_plot.add_count(current.value);
              }
            }
          }

        svg.transition()
          .attr("height", 550);
        dot_plot.size(550);
        //dot_plot.color("darkgrey");
        dot_plot.distance(200);
        dot_plot();

        bar_charts.opacity(0)
        bar_charts();

      }
      //dot plot -- by Shooting and Other
      function section_6(){

        let count = 0; //holds the number of circles to move down

          //get all selected elements from the form
          let selected = [];
          var form = document.getElementById('other_option');
          for(var i=0; i < form.length; i++){
              let current = form[i]
              form[i].onclick = function(){

                if (current.value == "reset"){
                  clear_boxes();
                }

                if (selected.includes(name)){

                  selected.filter((d)=> d == current.value)
                  dot_plot.add_count(current.value)
                }else{

                  selected.push(current.value);
                  dot_plot.add_count(current.value);
              }
            }
          }


        svg.transition()
          .attr("height", 550);

        bar_charts.opacity(0)
        bar_charts()


      }
      //Conclusion
      function section_7(){

        svg.transition()
          .attr("height", 400);

        dot_plot.add_count("reset");
        dot_plot.distance(50);
        dot_plot();
      }

});

</script>

</body>
</html>
